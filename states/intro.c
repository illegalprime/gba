#include "intro.h"

unsigned int frame_index = 0;
unsigned int last_frame = ~0;
const unsigned int n_frames = 318;
const unsigned short* intro_frames[] = {
	frame_011446,
	frame_011447,
	frame_011448,
	frame_011449,
	frame_011450,
	frame_011451,
	frame_011452,
	frame_011453,
	frame_011454,
	frame_011455,
	frame_011456,
	frame_011457,
	frame_011458,
	frame_011459,
	frame_011460,
	frame_011461,
	frame_011462,
	frame_011463,
	frame_011464,
	frame_011465,
	frame_011466,
	frame_011467,
	frame_011468,
	frame_011469,
	frame_011470,
	frame_011471,
	frame_011472,
	frame_011473,
	frame_011474,
	frame_011475,
	frame_011476,
	frame_011477,
	frame_011478,
	frame_011479,
	frame_011480,
	frame_011481,
	frame_011482,
	frame_011483,
	frame_011484,
	frame_011485,
	frame_011486,
	frame_011487,
	frame_011488,
	frame_011489,
	frame_011490,
	frame_011491,
	frame_011492,
	frame_011493,
	frame_011494,
	frame_011495,
	frame_011496,
	frame_011497,
	frame_011498,
	frame_011499,
	frame_011500,
	frame_011501,
	frame_011502,
	frame_011503,
	frame_011504,
	frame_011505,
	frame_011506,
	frame_011507,
	frame_011508,
	frame_011509,
	frame_011510,
	frame_011511,
	frame_011512,
	frame_011513,
	frame_011514,
	frame_011515,
	frame_011516,
	frame_011517,
	frame_011518,
	frame_011519,
	frame_011520,
	frame_011521,
	frame_011522,
	frame_011523,
	frame_011524,
	frame_011525,
	frame_011526,
	frame_011527,
	frame_011528,
	frame_011529,
	frame_011530,
	frame_011531,
	frame_011532,
	frame_011533,
	frame_011534,
	frame_011535,
	frame_011536,
	frame_011537,
	frame_011538,
	frame_011539,
	frame_011540,
	frame_011541,
	frame_011542,
	frame_011543,
	frame_011544,
	frame_011545,
	frame_011546,
	frame_011547,
	frame_011548,
	frame_011549,
	frame_011550,
	frame_011551,
	frame_011552,
	frame_011553,
	frame_011554,
	frame_011555,
	frame_011556,
	frame_011557,
	frame_011558,
	frame_011559,
	frame_011560,
	frame_011561,
	frame_011562,
	frame_011563,
	frame_011564,
	frame_011565,
	frame_011566,
	frame_011567,
	frame_011568,
	frame_011569,
	frame_011570,
	frame_011571,
	frame_011572,
	frame_011573,
	frame_011574,
	frame_011575,
	frame_011576,
	frame_011577,
	frame_011578,
	frame_011579,
	frame_011580,
	frame_011631,
	frame_011632,
	frame_011633,
	frame_011634,
	frame_011635,
	frame_011636,
	frame_011637,
	frame_011638,
	frame_011639,
	frame_011640,
	frame_011641,
	frame_011642,
	frame_011643,
	frame_011644,
	frame_011645,
	frame_011646,
	frame_011647,
	frame_011648,
	frame_011649,
	frame_011650,
	frame_011651,
	frame_011652,
	frame_011653,
	frame_011654,
	frame_011655,
	frame_011656,
	frame_011657,
	frame_011658,
	frame_011659,
	frame_011660,
	frame_011661,
	frame_011662,
	frame_011663,
	frame_011664,
	frame_011665,
	frame_011666,
	frame_011667,
	frame_011668,
	frame_011669,
	frame_011670,
	frame_011671,
	frame_011672,
	frame_011673,
	frame_011674,
	frame_011675,
	frame_011676,
	frame_011677,
	frame_011678,
	frame_011679,
	frame_011680,
	frame_011681,
	frame_011682,
	frame_011683,
	frame_011684,
	frame_011685,
	frame_011686,
	frame_011687,
	frame_011688,
	frame_011689,
	frame_011690,
	frame_011691,
	frame_011692,
	frame_011693,
	frame_011694,
	frame_011695,
	frame_011696,
	frame_011697,
	frame_011698,
	frame_011699,
	frame_011700,
	frame_011701,
	frame_011702,
	frame_011703,
	frame_011704,
	frame_011705,
	frame_011706,
	frame_011707,
	frame_011708,
	frame_011709,
	frame_011710,
	frame_011711,
	frame_011712,
	frame_011713,
	frame_011714,
	frame_011715,
	frame_011716,
	frame_011717,
	frame_011718,
	frame_011719,
	frame_011720,
	frame_011721,
	frame_011722,
	frame_011723,
	frame_011724,
	frame_011725,
	frame_011726,
	frame_011727,
	frame_011728,
	frame_011729,
	frame_011730,
	frame_011731,
	frame_011732,
	frame_011733,
	frame_011734,
	frame_011735,
	frame_011736,
	frame_011737,
	frame_011738,
	frame_011739,
	frame_011740,
	frame_011741,
	frame_011742,
	frame_011743,
	frame_011744,
	frame_011745,
	frame_011746,
	frame_011747,
	frame_011748,
	frame_011749,
	frame_011750,
	frame_011751,
	frame_011752,
	frame_011753,
	frame_011754,
	frame_011755,
	frame_011756,
	frame_011757,
	frame_011758,
	frame_011759,
	frame_011760,
	frame_011761,
	frame_011762,
	frame_011763,
	frame_011764,
	frame_011765,
	frame_011766,
	frame_011767,
	frame_011768,
	frame_011769,
	frame_011770,
	frame_011771,
	frame_011772,
	frame_011773,
	frame_011774,
	frame_011775,
	frame_011776,
	frame_011777,
	frame_011778,
	frame_011779,
	frame_011780,
	frame_011781,
	frame_011782,
	frame_011783,
	frame_011784,
	frame_011785,
	frame_011786,
	frame_011787,
	frame_011788,
	frame_011789,
	frame_011790,
	frame_011791,
	frame_011792,
	frame_011793,
	frame_011794,
	frame_011795,
	frame_011796,
	frame_011797,
	frame_011798,
	frame_011799,
	frame_011800,
	frame_011801,
	frame_011802,
	frame_011803,
	frame_011804,
	frame_011805,
	frame_011806,
	frame_011807,
	frame_011808,
	frame_011809,
	frame_011810,
	frame_011811,
};

enum GameState run_intro(u32 frame_no) {
	if (frame_no != last_frame + 1) {
		// start over
		frame_index = 0;
	}

	u16 intro_frame = frame_index / 2;
	struct Buttons events = button_events();

	if (intro_frame == n_frames || events.pressed & BUTTON_START) {
		return GAME_STATE_PLAY;
	}
	else {
		fill_image(intro_frames[intro_frame]);
		frame_index += 1;
		last_frame = frame_no;
		return GAME_STATE_INTRO;
	}
}
